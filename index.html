<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <style>
    canvas {
      display: block;
      border: 1px solid #000000;
      width: 800px;
      height: 400px;
      margin: 0 auto;
      margin-top: 100px;
    }
  </style>
  <script src="splot.js"></script>
</head>

<body>
  <canvas id="scatter-plot"></canvas>
  <script>

    function randomInt(range) {
      return Math.floor(Math.random() * range);
    }

    let i = 0;
    let n = 1_000_000;  // Имитируемое число объектов.
    let palette = ['#FF00FF', '#800080', '#FF0000', '#800000', '#FFFF00', '#00FF00', '#008000', '#00FFFF', '#0000FF', '#000080'];
    let plotWidth = 32_000;
    let plotHeight = 16_000;

    // Пример итерирующей функции. Итерации имитируются случайными выдачами. Почти также работает режим демо-данных.
    function readNextObject() {
      if (i < n) {
        i++;
        return {
          x: randomInt(plotWidth),
          y: randomInt(plotHeight),
          shape: randomInt(3),              // 0 - треугольник, 1 - квадрат, 2 - круг
          color: randomInt(palette.length)  // Индекс цвета в массиве цветов
        }
      }
      else
        return null;  // Возвращаем null, когда объекты "закончились"
    }

    /** ======================================================================== **/

    let scatterPlot = new SPlot('scatter-plot');

    // Настройка экземпляра на режим вывода отладочной информации в консоль браузера.
    // Другие примеры работы описаны в файле splot.js со строки 214.
    scatterPlot.setup({
      iterationCallback: readNextObject,
      polygonPalette: palette,
      gridSize: {
        width: plotWidth,
        height: plotHeight
      },
      debugMode: {
        isEnable: true
      },
      demoMode: {
        isEnable: true
      }
    });

    scatterPlot.run();

    /** ======================================================================== **/

  </script>
</body>

</html>
